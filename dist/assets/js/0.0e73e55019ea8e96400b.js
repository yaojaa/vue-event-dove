webpackJsonp([0,6],{39:function(e,t,a){var n,o;a(504),n=a(271);var s=a(731);o=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(o=n=n.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-7484b9d4",e.exports=n},271:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),s=n(o),i=a(375),r=n(i),c=a(3),l=n(c),u=a(8),d=n(u),m=a(4),v=a(2);t.default={name:"htmltoCanvas",verify:!0,data:function(){return{msg:"Welcome to Event Dove",formData:{upImg:!0,src:"",content:"",type:"problem"}}},mounted:function(){(0,m.loadJs)("/js/html2canvas.js",function(){$(".ui.radio.checkbox").checkbox(),$(".ui.toggle.checkbox").checkbox()})},methods:{cleanModal:function(){$(".ui.modal").modal("hide")},submitFeedback:function(){var e=this;return(0,d.default)(s.default.mark(function t(){var a,n,o,i,c;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$verify.check().then();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:if(a=e,n=JSON.parse((0,l.default)(e.formData)),delete n.src,delete n.upImg,o=(0,r.default)(n),i=!0,o.map(function(e){""==e&&(i=!1)}),i){t.next=17;break}return t.abrupt("return",a.$message.error("您有未填写的表单项！"));case 17:c=document.querySelector(".snapshoot"),null!=c?0==e.formData.upImg?e.formData.src="":e.formData.src=c.toDataURL():e.formData.src="",jQuery.ajax({url:v.API_URL+"help/feedback",type:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},contentType:"application/json",data:(0,l.default)(e.formData),success:function(e,t,a){200==a.status&&$("#pop-up").modal("show")},error:function(e){a.$message.error("服务器连接错误！")}});case 20:case"end":return t.stop()}},t,e,[[0,5]])}))()},getFeedbackPage:function(){function e(e){var t=document.getElementsByClassName("snapshoot-content")[0],a=t.innerHTML;t.innerHTML="",t.innerHTML=a,e()}function t(){return!!(window.ActiveXObject||"ActiveXObject"in window)}function a(){var e=document.querySelector(".snapshoot");!e||!e.getContext}function n(e){var t=$(document.body);t.find("div.swiper-slide *").not(".swiper-slide.swiper-slide-active,.swiper-slide.swiper-slide-prev").each(function(){$(this).remove()});var a=document.body.scrollHeight,n=$(document).scrollTop(),o=(document.elementFromPoint(n,0),document.documentElement.clientHeight),s=n/a,i=o/a,r=document.getElementsByClassName("snapshoot")[0],c=r.getContext("2d");html2canvas(t,{allowTaint:!1,useCORS:!0}).then(function(t){var a=.35*t.width,n=t.height*i*.44,o=t.height*s*1;document.querySelector(".snapshoot").setAttribute("width",a),document.querySelector(".snapshoot").setAttribute("height",n);var r=new Image;r.src=t.toDataURL(),c.save(),r.onload=function(){c.scale(.35,.45),c.drawImage(r,0,-o),c.restore(),e(t.toDataURL(),o)}})}return this.formData.content="",a(),t()?($(".ui.segment.snapshoot-content").remove(),$("#uploadSnap").remove(),void(this.formData.upImg=!1)):void e(function(){n(function(e,t){function a(e){function t(e){var t=.01,n=0,o=setInterval(function(){t+=.01,s.arc(a.x,a.y,a.r,n*Math.PI,t*Math.PI,!1),n=t,s.stroke(),t>=2&&(clearInterval(o),e())},4)}s.lineWidth=4,s.beginPath(),s.strokeStyle="red";var a={x:parseInt(o.width/2),y:parseInt(o.height/2),r:o.height/3};t(function(){e()})}function n(e,t){e.onmousedown=function(a){var n=.35,o=.45;t.save();var s=$(".snapshoot").offset().left,i=$(".snapshoot").offset().top-$(document).scrollTop(),a=a||window.event;t.moveTo(parseInt((a.clientX-s)/n),parseInt((a.clientY-i)/o)),e.onmousemove=function(e){var e=e||window.event;t.lineTo(parseInt((e.clientX-s)/n),parseInt((e.clientY-i)/o)),t.strokeStyle="#FF0000",t.lineWidth="6px",t.stroke()},e.onmouseup=function(){e.onmousemove=null},e.onmouseout=function(){e.onmousemove=null},t.restore()}}$("#snapshoot-dimmer").removeClass("active").addClass("disabled");var o=document.getElementsByClassName("snapshoot")[0],s=o.getContext("2d");a(function(){var a=document.getElementsByClassName("snapshoot-content")[0],o=a.innerHTML;a.innerHTML="",a.innerHTML=o;var s=document.getElementsByClassName("snapshoot")[0],i=s.getContext("2d");i.clearRect(0,0,9999999,999999);var r=new Image;r.src=e,r.onload=function(){i.scale(.35,.45),i.drawImage(r,0,-t),n(s,i)}})})})}}}},375:function(e,t,a){e.exports={default:a(389),__esModule:!0}},389:function(e,t,a){a(428),e.exports=a(10).Object.values},414:function(e,t,a){var n=a(32),o=a(26),s=a(43).f;e.exports=function(e){return function(t){for(var a,i=o(t),r=n(i),c=r.length,l=0,u=[];c>l;)s.call(i,a=r[l++])&&u.push(e?[a,i[a]]:i[a]);return u}}},428:function(e,t,a){var n=a(29),o=a(414)(!1);n(n.S,"Object",{values:function(e){return o(e)}})},440:function(e,t,a){t=e.exports=a(21)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"html2canvas.vue",sourceRoot:"webpack://"}])},504:function(e,t,a){var n=a(440);"string"==typeof n&&(n=[[e.id,n,""]]);a(22)(n,{});n.locals&&(e.exports=n.locals)},731:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sidebar-float",attrs:{id:"feedbackBtn"},on:{click:e.getFeedbackPage}},[e._m(0)]),e._v(" "),a("div",{directives:[{name:"ui",rawName:"v-ui",value:"#feedbackBtn",expression:"'#feedbackBtn'"}],staticClass:"ui small modal"},[a("div",{staticClass:"header bg-gray text-default "},[e._v("\n            反馈信息\n        ")]),e._v(" "),a("i",{staticClass:"close icon text-blue"}),e._v(" "),a("div",{staticClass:"ui  segment basic form mt-n"},[a("div",{staticClass:"ui segment"},[a("div",{staticClass:"tow fields"},[a("label",{attrs:{for:"feedbackType"}},[e._v("选择您的反馈类型：")]),e._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.type,expression:"formData.type"}],attrs:{type:"radio",name:"type",value:"problem"},domProps:{checked:e._q(e.formData.type,"problem")},on:{__c:function(t){e.formData.type="problem"}}}),e._v(" "),a("label",[e._v("问题反馈")])])]),e._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.type,expression:"formData.type"}],attrs:{type:"radio",name:"type",value:"suggestion"},domProps:{checked:e._q(e.formData.type,"suggestion")},on:{__c:function(t){e.formData.type="suggestion"}}}),e._v(" "),a("label",[e._v("功能建议")])])]),e._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.type,expression:"formData.type"}],attrs:{type:"radio",name:"type",value:"demand"},domProps:{checked:e._q(e.formData.type,"demand")},on:{__c:function(t){e.formData.type="demand"}}}),e._v(" "),a("label",[e._v("需求建议")])])]),e._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"ui radio checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.type,expression:"formData.type"}],attrs:{type:"radio",name:"type",value:"other"},domProps:{checked:e._q(e.formData.type,"other")},on:{__c:function(t){e.formData.type="other"}}}),e._v(" "),a("label",[e._v("其他")])])])]),e._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"ui toggle checkbox",attrs:{id:"uploadSnap"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.upImg,expression:"formData.upImg"}],attrs:{type:"checkbox",name:"privacy"},domProps:{checked:Array.isArray(e.formData.upImg)?e._i(e.formData.upImg,null)>-1:e.formData.upImg},on:{__c:function(t){var a=e.formData.upImg,n=t.target,o=!!n.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);o?i<0&&(e.formData.upImg=a.concat(s)):i>-1&&(e.formData.upImg=a.slice(0,i).concat(a.slice(i+1)))}else e.formData.upImg=o}}}),e._v(" "),a("label",[e._v("上传屏幕截图")])])]),e._v(" "),a("div",{staticClass:"field"},[a("label",[e._v("内容")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.content,expression:"formData.content"},{name:"vali",rawName:"v-vali",value:JSON.stringify({required:!0,minLength:10,maxLength:560}),expression:"JSON.stringify({required:true,minLength:10,maxLength:560})"}],staticStyle:{height:"120px"},attrs:{filed:"formData.content"},domProps:{value:e.formData.content},on:{input:function(t){t.target.composing||(e.formData.content=t.target.value)}}}),e._v(" "),e.$verify.$errors["formData.content"]?a("div",{staticClass:"ui red basic  pointing label"},[e._v("\n                        "+e._s(e.$verify.$errors["formData.content"])+"\n                    ")]):e._e()])]),e._v(" "),e._m(1),e._v(" "),a("div",{staticClass:"ui modal",attrs:{id:"pop-up"}},[a("i",{staticClass:"close icon"}),e._v(" "),a("div",{staticClass:"header bg-gray"}),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui button",on:{click:e.cleanModal}},[e._v("确定")])])]),e._v(" "),a("div",{staticClass:"field"}),e._v(" "),a("div",{staticClass:"ui submit button",staticStyle:{"margin-right":"0",display:"block"},on:{click:e.submitFeedback}},[e._v("提交")])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui button",attrs:{"data-tooltip":"问题反馈","data-position":"left center"}},[a("i",{staticClass:" big inbox icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui segment snapshoot-content"},[a("div",{staticClass:"ui active dimmer",attrs:{id:"snapshoot-dimmer"}},[a("div",{staticClass:"ui indeterminate text loader"},[e._v("正在载入截图")])]),e._v(" "),a("canvas",{staticClass:"snapshoot",attrs:{width:"100%",height:"450"}},[a("h3",[e._v("您的浏览器不支持屏幕截图功能。")]),e._v(">\n                ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("img",{attrs:{src:"/images/icon_31.png"}}),e._v(" "),a("div",{staticClass:"content-description"},[e._v("\n                        感谢您的耐心与建议，您的反馈我们已经收到，我们的工作人员会在最短内时间处理。\n                    ")])])}]}}});
//# sourceMappingURL=0.0e73e55019ea8e96400b.js.map